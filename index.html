<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style media="screen">
      body {
        background-image: url("https://tweedekamer2017.stemwijzer.nl/public/gfx/background.jpg");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: top center;
        background:  ;
      }
    </style>
    <title></title>
  </head>
  <body>
    <div class="container bg-white mt-5">
      <div class="row">
        <div class="col-12">
          <div class="navigation">
            <button type="button" name="button" class="btn" id="5" data-direction="previous"><li class="fa-arrow-left"></li></button>
          </div>
          <div id="stemwijzer" data-subject="0" >
          <div>
            <h1 id="title">hellos</h1>
            <p id="statement"></p>
          </div>
          <div id="btns">
            <button type="button" class="btn btn-primary" name="button1" id="1" data-choice="Eens" data-direction="next">Eens</button>
            <button type="button" class="btn btn-primary" name="button2" id="2" data-choice="Geen van beide" data-direction="next">Geen van beide</button>
            <button type="button" class="btn btn-primary" name="button3" id="3" data-choice="Oneens" data-direction="next">Oneens</button>
            <button type="button" class="btn btn-secondary" name="button3" id="4" data-direction="next">sla deze vraag over</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <script src="js/script.js"></script>;

    <script type="text/javascript">
      document.getElementById("title").addEventListener("click", builder);
      var a = [];

      buttonManagement();

      // console.log(b);

      function buttonManagement() {
        // var choice = this.getAttribute('data-choice');
        var subInd = parseInt(stemwijzer.getAttribute("data-subject"));
        var b = Array.prototype.slice.call( document.getElementsByTagName("button"));
        b.forEach((item, i) => {
          if (typeof a[subInd] != "undefined" && item.getAttribute("data-choice") == a[subInd]) {
            item.setAttribute("class","btn btn-success");
          } else if (item.getAttribute("id") == "4") {
            item.setAttribute("class","btn btn-secondary");
          } else {
            item.setAttribute("class","btn btn-primary");
          }
          item.addEventListener("click", buttonAction)
        });
      }

      function buttonAction() {
        var choice = this.getAttribute('data-choice');
        var subInd = parseInt(stemwijzer.getAttribute("data-subject"));
        var id = this.getAttribute("id");
        var direction = this.getAttribute('data-direction');

        if (choice != null && id != 5) {
          a[subInd] = choice;
        }
        // console.log(a[subInd]);
        builder(choice,direction);
        // console.log(choice);
      }

      function builder (c,d) {
        var title = document.getElementById('title');
        var context = document.getElementById('statement');
        var stemwijzer = document.getElementById('stemwijzer');
        var subInd = parseInt(stemwijzer.getAttribute("data-subject"));
          if (typeof c == "string" || c == null) {
            if (d == "next" ) {
            subInd = subInd+1;
            } else {
            subInd = subInd-1;
          }
            if (subInd != 0) {
              stemwijzer.setAttribute("data-subject", subInd);
            }
        }
        // alert(typeof c);
        // console.log(typeof c);
        title.innerHTML = subInd+1 + "." + subjects[subInd].title;
        context.innerHTML = subjects[subInd].statement;
      }
    </script>
  </body>
</html>
